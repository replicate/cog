# Test that cog debug shows secret mount syntax in Dockerfile output
# Source: test_run.py::test_run_with_secret

# Run cog debug to see the generated Dockerfile
cog debug
stdout 'RUN echo hello world'
stdout 'RUN --mount=type=secret,id=foo,target=secret.txt echo shh'

-- cog.yaml --
build:
  python_version: "3.12"
  run:
    - echo hello world
    - command: >-
        echo shh
      mounts:
        - type: secret
          id: foo
          target: secret.txt
predict: "predict.py:Predictor"

-- secret.txt --
secret content here

-- predict.py --
from cog import BasePredictor


class Predictor(BasePredictor):
    def predict(self, s: str) -> str:
        return "hello " + s
