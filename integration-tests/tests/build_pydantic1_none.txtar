# Test Pydantic 1 with optional None input builds successfully
# Source: test_build.py::test_pydantic1_none

# Build the image with Pydantic 1 and optional Path | None input
cog build -t $TEST_IMAGE

-- cog.yaml --
build:
  python_version: "3.10"
  python_packages:
    - "pillow"
predict: "predict.py:Predictor"

-- predict.py --
from cog import BasePredictor, Path, Input
from PIL import Image


class Predictor(BasePredictor):
    def predict(self, test_image: Path | None = Input(description="Test image", default=None)) -> Path:
        """Run a single prediction on the model"""
        im = Image.new("RGB", (100, 100), color="red")
        im.save(Path("./hello.webp"))
        return Path("./hello.webp")
