# Test optional Path input with None default (Pydantic 1 compatibility)

# Build the image
cog build -t $TEST_IMAGE

# Predict without providing optional input - should return red image
cog run $TEST_IMAGE

# Verify output file was created
exec test -f output.webp

-- cog.yaml --
build:
  python_version: "3.12"
  python_packages:
    - "pillow"
run: "run.py:Runner"

-- run.py --
from cog import BaseRunner, Path, Input
from PIL import Image


class Runner(BaseRunner):
    def run(
        self,
        test_image: Path | None = Input(description="Test image", default=None)
    ) -> Path:
        """Run a single prediction on the model"""
        im = Image.new("RGB", (100, 100), color="red")
        im.save(Path("./hello.webp"))
        return Path("./hello.webp")
