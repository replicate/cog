# Test complex input types (anthropic MessageParam)

# Build the image
cog build -t $TEST_IMAGE

# Predict with JSON input for complex type
cog predict $TEST_IMAGE -i 'message={"content": "Hi There", "role": "user"}'
stdout 'Content: Hi There'

-- cog.yaml --
build:
  python_version: "3.11"
  fast: true
  python_requirements: "requirements.txt"
predict: "predict.py:Predictor"

-- requirements.txt --
anthropic[vertex]==0.45.2

-- predict.py --
from anthropic.types import MessageParam
from cog import BasePredictor, Input
from cog.coder import json_coder  # noqa: F401

class Predictor(BasePredictor):
    test_inputs = {"message": {"content": "hello world"}}

    def predict(
        self,
        message: MessageParam = Input(description="Messages API."),
    ) -> str:
        return "Content: " + message["content"]
